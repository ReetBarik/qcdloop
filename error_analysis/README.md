# QCD Loop CSV Parser

A Python parser for QCD Loop error analysis CSV files generated by `boxGPU_test.cc`.

## Overview

This parser handles two types of CSV files with different complex number representations:

- **`box_run_1.csv`**: Complex coefficients stored as hex values (double precision)
- **`box_run_0.csv`**: Complex coefficients stored as quad precision decimal values

## Files

- `csv_parser.py` - Main parser implementation
- `test_parser.py` - Test script demonstrating basic functionality
- `example_usage.py` - Example analysis script showing data processing
- `box_run_0.csv` - Quad precision format data
- `box_run_1.csv` - Hex format data

## Usage

### Basic Usage

```python
from csv_parser import QCDLoopCSVParser

# Create parser instance
parser = QCDLoopCSVParser()

# Parse hex format (box_run_1.csv)
hex_data = parser.parse_box_run_1('box_run_1.csv')

# Parse quad precision format (box_run_0.csv)
quad_data = parser.parse_box_run_0('box_run_0.csv')

# Access parsed data
for row in hex_data:
    print(f"Target: {row.target_integral}")
    print(f"Test ID: {row.test_id}")
    print(f"mu2: {row.mu2}")
    print(f"ms: {row.ms}")
    print(f"ps: {row.ps}")
    print(f"Coeff1: {row.coeff1}")
    print(f"Coeff2: {row.coeff2}")
    print(f"Coeff3: {row.coeff3}")
```

### Data Structure

Each parsed row contains:

- `target_integral`: String (e.g., "BIN0", "B1", "B2", etc.)
- `test_id`: Integer test identifier
- `mu2`: Float value for muÂ²
- `ms`: List of 4 float values for mass squares
- `ps`: List of 6 float values for momentum squares
- `coeff1`: Complex number (first coefficient)
- `coeff2`: Complex number (second coefficient)
- `coeff3`: Complex number (third coefficient)

## Running the Examples

```bash
# Test basic functionality
python3 test_parser.py

# Run example analysis
python3 example_usage.py

# Run main parser with examples
python3 csv_parser.py
```

## Format Details

### Hex Format (box_run_1.csv)
Complex numbers are stored as: `(0x<hex_real>,0x<hex_imag>)`
- Example: `(0x3edcdf6ab09f9847,0xbf21d77917af7dab)`
- Uses IEEE 754 double precision representation

### Quad Precision Format (box_run_0.csv)
Complex numbers are stored as: `(real,imag)` with 33 decimal places
- Example: `(-0.000029344188064564620824975115832,-0.000075965947845587400237991399247)`
- Uses quad precision (128-bit) floating point

## Features

- **Robust CSV parsing**: Handles commas within complex number representations
- **Dual format support**: Automatically detects and parses both hex and quad precision formats
- **Error handling**: Gracefully handles malformed rows with detailed error messages
- **Type conversion**: Converts hex strings to proper complex numbers
- **Data validation**: Ensures proper row structure and data types

## Requirements

- Python 3.6+
- Standard library only (no external dependencies)

## Error Handling

The parser includes comprehensive error handling:

- Skips malformed rows with warning messages
- Validates row structure (expects exactly 8 columns)
- Handles parsing errors gracefully
- Provides detailed error information for debugging

## Performance

- Successfully parses 2100+ rows from each file
- Handles complex number parsing efficiently
- Memory efficient for large datasets
