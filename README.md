
[![Build Status](https://travis-ci.org/scarrazza/qcdloop.svg?branch=master)](https://travis-ci.org/scarrazza/qcdloop)

![alt text](https://raw.githubusercontent.com/scarrazza/qcdloop/master/extra/logo.png "Logo QCDLoop")

QCDLoop: an object-oriented one-loop scalar Feynman integrals framework

# General information

Homepage with library description: https://qcdloop.web.cern.ch

If you use this code in your publication, please cite
[arXiv:0712.1851](http://arxiv.org/abs/0712.1851) and
[arXiv:1605.03181](http://arxiv.org/abs/1605.03181).

## Download

You can obtain QCDLoop releases directly from the github repository:

https://github.com/scarrazza/qcdloop/releases

For the [Kokkos](https://kokkos.org)-enabled development version, you can clone the master code:

```Shell
git clone https://github.com/ReetBarik/qcdloop.git
```

## Installation

### [NOTE: The following has only been tested on and applies only to [JLSE](https://www.jlse.anl.gov) ]
Checkout the code and compile the code using the following procedure:

```Shell
cd qcdloop
source scripts/prepare.sh
source scripts/reset.sh
source source scripts/build_QCDLoops_Kokkos.sh $pwd
```

The above will build the executables (`tadpoleGPU_test`, `bubbleGPU_test`, `triangleGPU_test`, and `boxGPU_test`) in `qcdloop/build/` directory. Since there is no need to build `Kokkos`  every time while compiling, the following command can be used during development: 

```Shell
source scripts/compile.sh build/
```

## Usage

The following can be used to run the generated executables:
```Shell
./build/<topology>GPU_test <batch_size> <mode>
```

The `topology` can be any one of the following: 
- tadpole
- bubble
- triangle
- box

The arguments are explained below: 
- `batch_size`: positive `int` signifying the number of times each integral function must be executed in parallel for performance benchmarking. 
- `mode`:  either `0` for performance benachmark or `1` for correctness test. A value of `1` sets the `batch_size` value to `1`. 


## Testing

Simple tests have been handcrafted to compare the accuracy of results of integrals against those generated by the serial CPU library. The results of the GPU implementation can be validated as follows: 

```Shell
source scripts/unitTest.sh
```

The above generates `scripts/validate.txt` containing the results of the `39` total integral functions for the `4` topologies. This can be validated against the results for the same integrals obtained from the serial CPU library stored in `scripts/outputLabels.txt` as follows: 

```Shell
cd scripts
python3 test.py outputLabels.txt validate.txt 
```

## Contact Information

Maintainer: 
- Reet Barik (rbarik@anl.gov), 
- Taylor Childers (jchilders@anl.gov)
